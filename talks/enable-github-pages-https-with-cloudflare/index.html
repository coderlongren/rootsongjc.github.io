<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<head>
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="g8IYR9SNLF" />
    <meta name="uyan_auth" content="419f63884b" /> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="github-pages, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="使用Cloudflare为Github Pages博客开启https支持 : jimmysong.io"/>
<meta property="og:site_name" content="rootsongjc is Jimmy Song"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://jimmysong.io/talks/enable-github-pages-https-with-cloudflare/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-09-03"/>
<meta property="article:modified_time" content="2017-09-03"/>



<meta property="article:tag" content="github-pages">




<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@rootsongjc">
<meta name="twitter:title" content="使用Cloudflare为Github Pages博客开启https支持 : jimmysong.io">
<meta name="twitter:creator" content="@rootsongjc">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="jimmysong.io">

    <base href="http://jimmysong.io/">
    <title> 使用Cloudflare为Github Pages博客开启https支持 - Jimmy Song </title>
    <link rel="canonical" href="http://jimmysong.io/talks/enable-github-pages-https-with-cloudflare/"> <link rel="stylesheet" href="https://jimmysong.io/static/css/style.css">


<link href="https://jimmysong.io/static/css/prism.css" rel="stylesheet" />
<script type="text/javascript" src="https://jimmysong.io/static/js/prism.js"></script>


<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>




    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>

<body lang="en" itemscope itemtype="http://schema.org/Article">
    <header id="header">
    <figure>
      <a href="/" border=0 id="logolink"><div class="icon-octocat" id="logo"> </div></a>
    </figure>
    <div id="byline">by Jimmy Song</div>
    <nav id="nav">
    <ul id="mainnav">
    <li>
        <a href="/blogs/">
            <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
            <span> blogs </span>
        </a>
    </li>
    <li>
        <a href="/projects/">
            <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
            <span> projects </span>
        </a>
    </li>
    <li>
        <a href="/talks/">
            <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
            <span> talks </span>
        </a>
    </li>
    <li>
        <a href="http://www.linkedin.com/in/rootsongjc">
            <span class="icon"> <i aria-hidden="true" class="icon-linkedin"></i></span>
            <span> me </span>
        </a>
    </li>
</ul>
    <ul id="social">
    <li id="share">
        <span class="icon icon-bubbles"> </span>
        <span class="title"> share </span>
        <div class="dropdown share">
            <ul class="social">
                <li> <a href="https://twitter.com/intent/tweet?status=%e4%bd%bf%e7%94%a8Cloudflare%e4%b8%baGithub%20Pages%e5%8d%9a%e5%ae%a2%e5%bc%80%e5%90%afhttps%e6%94%af%e6%8c%81-http%3a%2f%2fjimmysong.io%2ftalks%2fenable-github-pages-https-with-cloudflare%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                <li> <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fjimmysong.io%2ftalks%2fenable-github-pages-https-with-cloudflare%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                <li> <a href="https://plus.google.com/share?url=http%3a%2f%2fjimmysong.io%2ftalks%2fenable-github-pages-https-with-cloudflare%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a> </li>
                <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fjimmysong.io%2ftalks%2fenable-github-pages-https-with-cloudflare%2f&title=%e4%bd%bf%e7%94%a8Cloudflare%e4%b8%baGithub%20Pages%e5%8d%9a%e5%ae%a2%e5%bc%80%e5%90%afhttps%e6%94%af%e6%8c%81&source=spf13" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                <li> <a href="http://del.icio.us/post?url=http%3a%2f%2fjimmysong.io%2ftalks%2fenable-github-pages-https-with-cloudflare%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a> </li>
                <li> <a href="http://www.reddit.com/submit?url=http%3a%2f%2fjimmysong.io%2ftalks%2fenable-github-pages-https-with-cloudflare%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a> </li>
            </ul>
            <span class="subcount">sharing is caring</span>
        </div>
    </li>
    <li id="follow">
        <span class="icon icon-rocket"> </span>
        <span class="title"> follow </span>
        <div class="dropdown follow">
            <ul class="social">
                <li> <a href="http://www.twitter.com/rootsongjc" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                <li> <a href="http://www.facebook.com/rootsongjc" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                <li> <a href="http://www.linkedin.com/in/rootsongjc" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                <li> <a href="http://github.com/rootsongjc" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                <li> <a href="https://www.douban.com/people/deamonj/" target="_blank" title="豆瓣" class="facebook"><span class="icon icon-idea"></span>Douban</a> </li>
                <li> <a href="https://rootsongjc.tuchong.com/" target="_blank" title="图虫" class="github"><span class="icon icon-cc-2"></span>Tuchong</a> </li>
            </ul>
            <span class="subcount">join 10k+ subscribers &amp; followers</span>
        </div>
    </li>
</ul>
    </nav>
</header>
 

    <section id="main">
        <h1 itemprop="name" id="title">使用Cloudflare为Github Pages博客开启https支持</h1>
        <div>
            <article itemprop="articleBody" id="content">
                

<p>实在受不了无耻的运营商劫持，如下图：</p>

<p><img src="http://olz1di9xf.bkt.clouddn.com/operator-dns-hijacking-ad-2.png" alt="运营商劫持" /></p>

<p>总是在我的网站页面上植入广告，尤其是在微信中打开我的网站链接然后选择在浏览器中打开的时候，最近总是植入广告，迫不得已我要开启https。</p>

<p>因为是用的是 Github Page，启用了自定义域名就无法再在Github中配置开启https，只能自己另想办法。</p>

<p>参考这篇文章 ➡️ <a href="https://zhuanlan.zhihu.com/p/22667528">开启 Github Pages 自定义域名 HTTPS 和 HTTP/2 支持</a> 👏👏</p>

<h2 id="步骤说明">步骤说明</h2>

<p>这一切都是免费的，只需要以下几个步骤：</p>

<ul>
<li>在 <a href="https://www.cloudflare.com/">https://www.cloudflare.com/</a> 注册，经过一系列对你的网站自动检测后，获得新的 nameserver 地址；</li>
<li>和我的域名注册机构 <a href="https://www.namecheap.com">https://www.namecheap.com</a> 配置一下，修改 nameservers 记录为刚才在 Cloudflare 上获得的 nameserver 地址；</li>
<li>在 Cloudflare 上配置 Page Rules：加入一条规则 <a href="http://jimmysong.io/*">http://jimmysong.io/*</a> 设置为 <code>Always Use HTTPS</code></li>
<li>修改网站代码中的 css 和 js 文件地址为 https；</li>
<li>等几分钟访问网站 <a href="http://jimmysong.io">http://jimmysong.io</a> 后就会跳转为 <a href="https://jimmysong.io">https://jimmysong.io</a> 。</li>
</ul>

<h2 id="遗留问题">遗留问题</h2>

<p>该过程中主要遇到下面两个问题：</p>

<ul>
<li>需要在网站代码中名为指定 css 和 js 文件的路径要包含域名，使用相对路径的话仍然会以 http 的形式加载，将导致网站无法加载样式；</li>
<li>第一次使用 <a href="https://jimmysong.io">https://jimmysong.io</a> 访问的时候可能会提示证书问题，一旦选择信任后在后续访问的过程中就不会再提示。</li>
</ul>

<p>暂且这样，以后再继续优化！⛽️</p>

            </article>
        </div>
    </section>

    
    

<aside id="meta">

<div>
    <section id="datecount">
        <h4 id="date"> Sun Sep 3, 2017 </h4>
        <h5 id="wc"> 500 Words </h5>
        <h5 id="readtime"> Read in about 1 Min </h5>
    </section>
    <ul id="categories">
        
    </ul>
    <ul id="tags">
        
        <li> <a href="http://jimmysong.io//tags/github-pages">github-pages</a> </li>
        
    </ul>
</div>

<div>
    <section id="prev">
        &nbsp;
    </section>
    <section id="next">
        &nbsp;<a class="next" href="http://jimmysong.io/blogs/kubectl-user-authentication-authorization/">kubectl的用户认证授权 <i class="icon-arrow-right"></i></a>
    </section>
</div>

<div>
    <section id="author">
        <h4>About the Author</h4>
        <p>
            <a href="http://rootsongjc.github.io/about/">Jimmy Song</a> is a software engineer in Beijing, also an open source enthusiast and Big Data, Cloud Native fans. If you not see him front of computer, he must be traveling or taking pictures outside,
            visit the amazing pictures at <a href=https://rootsongjc.tuchong.com/>tuchong(图虫)</a>. Feel free to <a href=https://twitter.com/rootsongjc>follow him on twitter</a>.
        </p>
    </section>

</div>
</aside>

<meta itemprop="wordCount" content="429">
<meta itemprop="datePublished" content="2017-09-03">
<meta itemprop="url" content="http://jimmysong.io/talks/enable-github-pages-https-with-cloudflare/">
 <footer>
    <div>
        <p>
            <a href="https://jimmysong.io/kubernetes-handbook">Kubernetes Handbook</a> |
            <a href="https://jimmysong.io/cloud-native-go">Cloud Native Go</a> |
            <a href="https://jimmysong.io/awesome-cloud-native">Awesome Cloud Native</a> |
            <a href="https://jimmysong.io/migrating-to-cloud-native-application-architectures">Migrating to Cloud Native Application Architectures</a>
    </div>
    <div>
        <p>

        </p>
        <p> &copy; 2013-2017 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Jimmy Song</span></span>
            Powered by <a href="https://gohugo.io">Hugo</a> </p>
    </div>
</footer>
</body>

</html>

