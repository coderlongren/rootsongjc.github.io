<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="baidu-site-verification" content="g8IYR9SNLF" />
    <meta name="uyan_auth" content="419f63884b" /> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="kubernetes, docker, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="docker用户过度到kubectl命令行指南 : jimmysong.io"/>
<meta property="og:site_name" content="rootsongjc is Jimmy Song"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="https://jimmysong.io/blogs/docker-cli-to-kubectl/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-09-16"/>
<meta property="article:modified_time" content="2017-09-16"/>



<meta property="article:tag" content="kubernetes">
<meta property="article:tag" content="docker">




<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@rootsongjc">
<meta name="twitter:title" content="docker用户过度到kubectl命令行指南 : jimmysong.io">
<meta name="twitter:creator" content="@rootsongjc">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="jimmysong.io">

    <base href="https://jimmysong.io/">
    <title> docker用户过度到kubectl命令行指南 - jimmysong.io focus on Cloud Native & Big Data </title>
    <link rel="canonical" href="https://jimmysong.io/blogs/docker-cli-to-kubectl/"> <link rel="stylesheet" href="https://jimmysong.io/static/css/style.css">




<link rel="stylesheet" href="/static/css/syntax.css">


<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>





    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>


<body lang="en" itemscope itemtype="http://schema.org/Article">
    <header id="header">
    <figure>
      <a href="/" border=0 id="logolink"><div class="icon-octocat" id="logo"> </div></a>
    </figure>
    <div id="byline">by Jimmy Song</div>
    <nav id="nav">
    <ul id="mainnav">
    <li>
        <a href="/blogs/">
            <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
            <span> blogs </span>
        </a>
    </li>
    <li>
        <a href="/projects/">
            <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
            <span> projects </span>
        </a>
    </li>
    <li>
        <a href="/talks/">
            <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
            <span> talks </span>
        </a>
    </li>
    <li>
        <a href="http://www.linkedin.com/in/rootsongjc">
            <span class="icon"> <i aria-hidden="true" class="icon-linkedin"></i></span>
            <span> me </span>
        </a>
    </li>
</ul>
    <ul id="social">
    <li id="share">
        <span class="icon icon-bubbles"> </span>
        <span class="title"> share </span>
        <div class="dropdown share">
            <ul class="social">
                <li> <a href="https://twitter.com/intent/tweet?status=docker%e7%94%a8%e6%88%b7%e8%bf%87%e5%ba%a6%e5%88%b0kubectl%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%8c%87%e5%8d%97-https%3a%2f%2fjimmysong.io%2fblogs%2fdocker-cli-to-kubectl%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                <li> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjimmysong.io%2fblogs%2fdocker-cli-to-kubectl%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                <li> <a href="https://plus.google.com/share?url=https%3a%2f%2fjimmysong.io%2fblogs%2fdocker-cli-to-kubectl%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a> </li>
                <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjimmysong.io%2fblogs%2fdocker-cli-to-kubectl%2f&title=docker%e7%94%a8%e6%88%b7%e8%bf%87%e5%ba%a6%e5%88%b0kubectl%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%8c%87%e5%8d%97&source=spf13" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                <li> <a href="http://del.icio.us/post?url=https%3a%2f%2fjimmysong.io%2fblogs%2fdocker-cli-to-kubectl%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a> </li>
                <li> <a href="http://www.reddit.com/submit?url=https%3a%2f%2fjimmysong.io%2fblogs%2fdocker-cli-to-kubectl%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a> </li>
            </ul>
            <span class="subcount">sharing is caring</span>
        </div>
    </li>
    <li id="follow">
        <span class="icon icon-rocket"> </span>
        <span class="title"> follow </span>
        <div class="dropdown follow">
            <ul class="social">
                <li> <a href="http://www.twitter.com/jimmysongio" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                <li> <a href="http://www.facebook.com/jimmysongio" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                <li> <a href="http://www.linkedin.com/in/jimmysongio" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                <li> <a href="http://github.com/rootsongjc" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                <li> <a href="https://www.douban.com/people/deamonj/" target="_blank" title="豆瓣" class="facebook"><span class="icon icon-idea"></span>Douban</a> </li>
                <li> <a href="https://jimmysongio.tuchong.com/" target="_blank" title="图虫" class="github"><span class="icon icon-cc-2"></span>Tuchong</a> </li>
            </ul>
            <span class="subcount">join 10k+ subscribers &amp; followers</span>
        </div>
    </li>
</ul>

    </nav>
</header>
 
    <section id="main">
        <h1 itemprop="name" id="title">docker用户过度到kubectl命令行指南</h1>
        <div>
            <article itemprop="articleBody" id="content">
                

<p>对于没有使用过 kubernetes 的 docker 用户，如何快速掌握 kubectl 命令？kubectl 跟 docker 命令之间有什么区别和联系？</p>

<p>在本文中，我们将向 docker-cli 用户介绍 Kubernetes 命令行如何与 api 进行交互。该命令行工具——kubectl，被设计成 docker-cli 用户所熟悉的样子，但是它们之间又存在一些必要的差异。该文档将向您展示每个 docker 子命令和 kubectl 与其等效的命令。</p>

<p>在使用 kubernetes 集群的时候，docker 命令通常情况是不需要用到的，只有在调试程序或者容器的时候用到，我们基本上使用 kubectl 命令即可，所以在操作 kubernetes 的时候我们抛弃原先使用 docker 时的一些观念。</p>

<h4 id="docker-run">docker run</h4>

<p>如何运行一个 nginx Deployment 并将其暴露出来？ 查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#run">kubectl run</a> 。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker run -d --restart</span><span class="o">=</span><span class="">always -e </span><span class="nv">DOMAIN</span><span class=""></span><span class="o">=</span><span class="">cluster --name nginx-app -p </span><span class="m">80</span><span class="">:80 nginx
</span><span class="">a9ec34d9878748d2f33dc20cb25c714ff21da8d40558b45bfaec9955859075d0
</span><span class="">$ docker ps
</span><span class="">CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS              PORTS                         NAMES
</span><span class="">a9ec34d98787        nginx               </span><span class="s2">&#34;nginx -g &#39;daemon of   2 seconds ago       Up 2 seconds        0.0.0.0:80-&gt;80/tcp, 443/tcp   nginx-app </span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># start the pod running nginx
</span><span class="c1"></span><span class="">$ kubectl run --image</span><span class="o">=</span><span class="">nginx nginx-app --port</span><span class="o">=</span><span class="m">80</span><span class=""> --env</span><span class="o">=</span><span class="s2">&#34;DOMAIN=cluster&#34;</span><span class="">
</span><span class="">deployment </span><span class="s2">&#34;nginx-app&#34;</span><span class=""> created</span></code></pre>
</div>
<p>在大于等于 1.2 版本 Kubernetes 集群中，使用<code>kubectl run</code> 命令将创建一个名为 &ldquo;nginx-app&rdquo; 的 Deployment。如果您运行的是老版本，将会创建一个 replication controller。 如果您想沿用旧的行为，使用 <code>--generation=run/v1</code> 参数，这样就会创建 replication controller。查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#run"><code>kubectl run</code></a> 获取更多详细信息。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># expose a port through with a service
</span><span class="c1"></span><span class="">$ kubectl expose deployment nginx-app --port</span><span class="o">=</span><span class="m">80</span><span class=""> --name</span><span class="o">=</span><span class="">nginx-http
</span><span class="">service </span><span class="s2">&#34;nginx-http&#34;</span><span class=""> exposed</span></code></pre>
</div>
<p>在 kubectl 命令中，我们创建了一个 <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment">Deployment</a>，这将保证有 N 个运行 nginx 的 pod（N 代表 spec 中声明的 replica 数，默认为 1）。我们还创建了一个 <a href="https://kubernetes.io/docs/user-guide/services">service</a>，使用 selector 匹配具有相应的 selector 的 Deployment。查看 <a href="https://kubernetes.io/docs/user-guide/quick-start">快速开始</a> 获取更多信息。</p>

<p>默认情况下镜像会在后台运行，与<code>docker run -d ...</code> 类似，如果您想在前台运行，使用：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">kubectl run </span><span class="o">[</span><span class="">-i</span><span class="o">]</span><span class=""> </span><span class="o">[</span><span class="">--tty</span><span class="o">]</span><span class=""> --attach &lt;name&gt; --image</span><span class="o">=</span><span class="">&lt;image&gt;</span></code></pre>
</div>
<p>与 <code>docker run ...</code> 不同的是，如果指定了 <code>--attach</code> ，我们将连接到 <code>stdin</code>，<code>stdout</code> 和 <code>stderr</code>，而不能控制具体连接到哪个输出流（<code>docker -a ...</code>）。</p>

<p>因为我们使用 Deployment 启动了容器，如果您终止了连接到的进程（例如 <code>ctrl-c</code>），容器将会重启，这跟 <code>docker run -it</code>不同。 如果想销毁该 Deployment（和它的 pod），您需要运行 <code>kubeclt delete deployment &lt;name&gt;</code>。</p>

<h4 id="docker-ps">docker ps</h4>

<p>如何列出哪些正在运行？查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#get">kubectl get</a>。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker ps
</span><span class="">CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS              PORTS                         NAMES
</span><span class="">a9ec34d98787        nginx               </span><span class="s2">&#34;nginx -g &#39;daemon of   About an hour ago   Up About an hour    0.0.0.0:80-&gt;80/tcp, 443/tcp   nginx-app</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl get po
</span><span class="">NAME              READY     STATUS    RESTARTS   AGE
</span><span class="">nginx-app-5jyvm   </span><span class="m">1</span><span class="">/1       Running   </span><span class="m">0</span><span class="">          1h</span></code></pre>
</div>
<h4 id="docker-attach">docker attach</h4>

<p>如何连接到已经运行在容器中的进程？查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#attach">kubectl attach</a>。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker ps
</span><span class="">CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS              PORTS                         NAMES
</span><span class="">a9ec34d98787        nginx               </span><span class="s2">&#34;nginx -g &#39;daemon of   8 minutes ago       Up 8 minutes        0.0.0.0:80-&gt;80/tcp, 443/tcp   nginx-app
</span><span class="s2"></span><span class="">$</span><span class="s2"> docker attach a9ec34d98787
</span><span class="s2">...</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl get pods
</span><span class="">NAME              READY     STATUS    RESTARTS   AGE
</span><span class="">nginx-app-5jyvm   </span><span class="m">1</span><span class="">/1       Running   </span><span class="m">0</span><span class="">          10m
</span><span class="">$ kubectl attach -it nginx-app-5jyvm
</span><span class="">...</span></code></pre>
</div>
<h4 id="docker-exec">docker exec</h4>

<p>如何在容器中执行命令？查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#exec">kubectl exec</a>。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker ps
</span><span class="">CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS              PORTS                         NAMES
</span><span class="">a9ec34d98787        nginx               </span><span class="s2">&#34;nginx -g &#39;daemon of   8 minutes ago       Up 8 minutes        0.0.0.0:80-&gt;80/tcp, 443/tcp   nginx-app
</span><span class="s2"></span><span class="">$</span><span class="s2"> docker exec a9ec34d98787 cat /etc/hostname
</span><span class="s2">a9ec34d98787</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl get po
</span><span class="">NAME              READY     STATUS    RESTARTS   AGE
</span><span class="">nginx-app-5jyvm   </span><span class="m">1</span><span class="">/1       Running   </span><span class="m">0</span><span class="">          10m
</span><span class="">$ kubectl </span><span class="nb">exec</span><span class=""> nginx-app-5jyvm -- cat /etc/hostname
</span><span class="">nginx-app-5jyvm</span></code></pre>
</div>
<p>执行交互式命令怎么办？</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker </span><span class="nb">exec</span><span class=""> -ti a9ec34d98787 /bin/sh
</span><span class=""># exit</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl </span><span class="nb">exec</span><span class=""> -ti nginx-app-5jyvm -- /bin/sh      
</span><span class=""># exit</span></code></pre>
</div>
<p>更多信息请查看 <a href="https://kubernetes.io/docs/tasks/kubectl/get-shell-running-container">获取运行中容器的 Shell 环境</a>。</p>

<h4 id="docker-logs">docker logs</h4>

<p>如何查看运行中进程的 stdout/stderr？查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#logs">kubectl logs</a>。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker logs -f a9e
</span><span class=""></span><span class="m">192</span><span class="">.168.9.1 - - </span><span class="o">[</span><span class="m">14</span><span class="">/Jul/2015:01:04:02 +0000</span><span class="o">]</span><span class=""> </span><span class="s2">&#34;GET / HTTP/1.1&#34;</span><span class=""> </span><span class="m">200</span><span class=""> </span><span class="m">612</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class=""> </span><span class="s2">&#34;curl/7.35.0&#34;</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class="">
</span><span class=""></span><span class="m">192</span><span class="">.168.9.1 - - </span><span class="o">[</span><span class="m">14</span><span class="">/Jul/2015:01:04:03 +0000</span><span class="o">]</span><span class=""> </span><span class="s2">&#34;GET / HTTP/1.1&#34;</span><span class=""> </span><span class="m">200</span><span class=""> </span><span class="m">612</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class=""> </span><span class="s2">&#34;curl/7.35.0&#34;</span><span class=""> </span><span class="s2">&#34;-&#34;</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl logs -f nginx-app-zibvs
</span><span class=""></span><span class="m">10</span><span class="">.240.63.110 - - </span><span class="o">[</span><span class="m">14</span><span class="">/Jul/2015:01:09:01 +0000</span><span class="o">]</span><span class=""> </span><span class="s2">&#34;GET / HTTP/1.1&#34;</span><span class=""> </span><span class="m">200</span><span class=""> </span><span class="m">612</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class=""> </span><span class="s2">&#34;curl/7.26.0&#34;</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class="">
</span><span class=""></span><span class="m">10</span><span class="">.240.63.110 - - </span><span class="o">[</span><span class="m">14</span><span class="">/Jul/2015:01:09:02 +0000</span><span class="o">]</span><span class=""> </span><span class="s2">&#34;GET / HTTP/1.1&#34;</span><span class=""> </span><span class="m">200</span><span class=""> </span><span class="m">612</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class=""> </span><span class="s2">&#34;curl/7.26.0&#34;</span><span class=""> </span><span class="s2">&#34;-&#34;</span></code></pre>
</div>
<p>现在是时候提一下 pod 和容器之间的细微差别了；默认情况下如果 pod 中的进程退出 pod 也不会终止，相反它将会重启该进程。这类似于 docker run 时的 <code>--restart=always</code> 选项， 这是主要差别。在 docker 中，进程的每个调用的输出都是被连接起来的，但是对于 kubernetes，每个调用都是分开的。要查看以前在 kubernetes 中执行的输出，请执行以下操作：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl logs --previous nginx-app-zibvs
</span><span class=""></span><span class="m">10</span><span class="">.240.63.110 - - </span><span class="o">[</span><span class="m">14</span><span class="">/Jul/2015:01:09:01 +0000</span><span class="o">]</span><span class=""> </span><span class="s2">&#34;GET / HTTP/1.1&#34;</span><span class=""> </span><span class="m">200</span><span class=""> </span><span class="m">612</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class=""> </span><span class="s2">&#34;curl/7.26.0&#34;</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class="">
</span><span class=""></span><span class="m">10</span><span class="">.240.63.110 - - </span><span class="o">[</span><span class="m">14</span><span class="">/Jul/2015:01:09:02 +0000</span><span class="o">]</span><span class=""> </span><span class="s2">&#34;GET / HTTP/1.1&#34;</span><span class=""> </span><span class="m">200</span><span class=""> </span><span class="m">612</span><span class=""> </span><span class="s2">&#34;-&#34;</span><span class=""> </span><span class="s2">&#34;curl/7.26.0&#34;</span><span class=""> </span><span class="s2">&#34;-&#34;</span></code></pre>
</div>
<p>查看 <a href="https://kubernetes.io/docs/concepts/cluster-administration/logging">记录和监控集群活动</a> 获取更多信息。</p>

<h4 id="docker-stop-和-docker-rm">docker stop 和 docker rm</h4>

<p>如何停止和删除运行中的进程？查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#delete">kubectl delete</a>。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker ps
</span><span class="">CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS              PORTS                         NAMES
</span><span class="">a9ec34d98787        nginx               </span><span class="s2">&#34;nginx -g &#39;daemon of   22 hours ago        Up 22 hours         0.0.0.0:80-&gt;80/tcp, 443/tcp   nginx-app
</span><span class="s2"></span><span class="">$</span><span class="s2"> docker stop a9ec34d98787
</span><span class="s2">a9ec34d98787
</span><span class="s2"></span><span class="">$</span><span class="s2"> docker rm a9ec34d98787
</span><span class="s2">a9ec34d98787</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl get deployment nginx-app
</span><span class="">NAME        DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
</span><span class="">nginx-app   </span><span class="m">1</span><span class="">         </span><span class="m">1</span><span class="">         </span><span class="m">1</span><span class="">            </span><span class="m">1</span><span class="">           2m
</span><span class="">$ kubectl get po -l </span><span class="nv">run</span><span class=""></span><span class="o">=</span><span class="">nginx-app
</span><span class="">NAME                         READY     STATUS    RESTARTS   AGE
</span><span class="">nginx-app-2883164633-aklf7   </span><span class="m">1</span><span class="">/1       Running   </span><span class="m">0</span><span class="">          2m
</span><span class="">$ kubectl delete deployment nginx-app
</span><span class="">deployment </span><span class="s2">&#34;nginx-app&#34;</span><span class=""> deleted
</span><span class="">$ kubectl get po -l </span><span class="nv">run</span><span class=""></span><span class="o">=</span><span class="">nginx-app
</span><span class=""># Return nothing</span></code></pre>
</div>
<p>请注意，我们不直接删除 pod。使用 kubectl 命令，我们要删除拥有该 pod 的 Deployment。如果我们直接删除pod，Deployment 将会重新创建该 pod。</p>

<h4 id="docker-login">docker login</h4>

<p>在 kubectl 中没有对 <code>docker login</code> 的直接模拟。如果您有兴趣在私有镜像仓库中使用 Kubernetes，请参阅 <a href="https://kubernetes.io/docs/concepts/containers/images/#using-a-private-registry">使用私有镜像仓库</a>。</p>

<h4 id="docker-version">docker version</h4>

<p>如何查看客户端和服务端的版本？查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#version">kubectl version</a>。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker version
</span><span class="">Client version: </span><span class="m">1</span><span class="">.7.0
</span><span class="">Client API version: </span><span class="m">1</span><span class="">.19
</span><span class="">Go version </span><span class="o">(</span><span class="">client</span><span class="o">)</span><span class="">: go1.4.2
</span><span class="">Git commit </span><span class="o">(</span><span class="">client</span><span class="o">)</span><span class="">: 0baf609
</span><span class="">OS/Arch </span><span class="o">(</span><span class="">client</span><span class="o">)</span><span class="">: linux/amd64
</span><span class="">Server version: </span><span class="m">1</span><span class="">.7.0
</span><span class="">Server API version: </span><span class="m">1</span><span class="">.19
</span><span class="">Go version </span><span class="o">(</span><span class="">server</span><span class="o">)</span><span class="">: go1.4.2
</span><span class="">Git commit </span><span class="o">(</span><span class="">server</span><span class="o">)</span><span class="">: 0baf609
</span><span class="">OS/Arch </span><span class="o">(</span><span class="">server</span><span class="o">)</span><span class="">: linux/amd64</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl version
</span><span class="">Client Version: version.Info</span><span class="o">{</span><span class="">Major:</span><span class="s2">&#34;1&#34;</span><span class="">, Minor:</span><span class="s2">&#34;6&#34;</span><span class="">, GitVersion:</span><span class="s2">&#34;v1.6.9+a3d1dfa6f4335&#34;</span><span class="">, GitCommit:</span><span class="s2">&#34;9b77fed11a9843ce3780f70dd251e92901c43072&#34;</span><span class="">, GitTreeState:</span><span class="s2">&#34;dirty&#34;</span><span class="">, BuildDate:</span><span class="s2">&#34;2017-08-29T20:32:58Z&#34;</span><span class="">, OpenPaasKubernetesVersion:</span><span class="s2">&#34;v1.03.02&#34;</span><span class="">, GoVersion:</span><span class="s2">&#34;go1.7.5&#34;</span><span class="">, Compiler:</span><span class="s2">&#34;gc&#34;</span><span class="">, Platform:</span><span class="s2">&#34;linux/amd64&#34;</span><span class="o">}</span><span class="">
</span><span class="">Server Version: version.Info</span><span class="o">{</span><span class="">Major:</span><span class="s2">&#34;1&#34;</span><span class="">, Minor:</span><span class="s2">&#34;6&#34;</span><span class="">, GitVersion:</span><span class="s2">&#34;v1.6.9+a3d1dfa6f4335&#34;</span><span class="">, GitCommit:</span><span class="s2">&#34;9b77fed11a9843ce3780f70dd251e92901c43072&#34;</span><span class="">, GitTreeState:</span><span class="s2">&#34;dirty&#34;</span><span class="">, BuildDate:</span><span class="s2">&#34;2017-08-29T20:32:58Z&#34;</span><span class="">, OpenPaasKubernetesVersion:</span><span class="s2">&#34;v1.03.02&#34;</span><span class="">, GoVersion:</span><span class="s2">&#34;go1.7.5&#34;</span><span class="">, Compiler:</span><span class="s2">&#34;gc&#34;</span><span class="">, Platform:</span><span class="s2">&#34;linux/amd64&#34;</span><span class="o">}</span></code></pre>
</div>
<h4 id="docker-info">docker info</h4>

<p>如何获取有关环境和配置的各种信息？查看 <a href="https://kubernetes.io/docs/user-guide/kubectl/#cluster-info">kubectl cluster-info</a>。</p>

<p>使用 docker 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ docker info
</span><span class="">Containers: </span><span class="m">40</span><span class="">
</span><span class="">Images: </span><span class="m">168</span><span class="">
</span><span class="">Storage Driver: aufs
</span><span class=""> Root Dir: /usr/local/google/docker/aufs
</span><span class=""> Backing Filesystem: extfs
</span><span class=""> Dirs: </span><span class="m">248</span><span class="">
</span><span class=""> Dirperm1 Supported: </span><span class="nb">false</span><span class="">
</span><span class="">Execution Driver: native-0.2
</span><span class="">Logging Driver: json-file
</span><span class="">Kernel Version: </span><span class="m">3</span><span class="">.13.0-53-generic
</span><span class="">Operating System: Ubuntu </span><span class="m">14</span><span class="">.04.2 LTS
</span><span class="">CPUs: </span><span class="m">12</span><span class="">
</span><span class="">Total Memory: </span><span class="m">31</span><span class="">.32 GiB
</span><span class="">Name: k8s-is-fun.mtv.corp.google.com
</span><span class="">ID: ADUV:GCYR:B3VJ:HMPO:LNPQ:KD5S:YKFQ:76VN:IANZ:7TFV:ZBF4:BYJO
</span><span class="">WARNING: No swap limit support</span></code></pre>
</div>
<p>使用 kubectl 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ kubectl cluster-info
</span><span class="">Kubernetes master is running at https://108.59.85.141
</span><span class="">KubeDNS is running at https://108.59.85.141/api/v1/namespaces/kube-system/services/kube-dns/proxy
</span><span class="">KubeUI is running at https://108.59.85.141/api/v1/namespaces/kube-system/services/kube-ui/proxy
</span><span class="">Grafana is running at https://108.59.85.141/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy
</span><span class="">Heapster is running at https://108.59.85.141/api/v1/namespaces/kube-system/services/monitoring-heapster/proxy
</span><span class="">InfluxDB is running at https://108.59.85.141/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy</span></code></pre>
</div>
<p>本文同时归档到 <a href="https://jimmysong.io/kubernetes-handbook">kubernetes-handbook</a>。</p>

<p>原文地址：<a href="https://github.com/rootsongjc/kubernetes.github.io/blob/master/docs/user-guide/docker-cli-to-kubectl.md">https://github.com/rootsongjc/kubernetes.github.io/blob/master/docs/user-guide/docker-cli-to-kubectl.md</a></p>

            </article>
             
            <h2>See Also</h2>
            <ul>
                
                <li><a href="/blogs/docker-vs-kubernetes-part2/">Docker v.s Kubernetes part2</a></li>
                
                <li><a href="/blogs/docker-vs-kubernetes-part1/">Docker v.s Kubernetes part1</a></li>
                
                <li><a href="/blogs/creating-cloud-native-app-with-kubernetes/">如何开发部署kubernetes native应用</a></li>
                
                <li><a href="/blogs/running-spark-with-kubernetes-native-scheduler/">运行支持kubernetes原生调度的spark程序-Spark on Kubernetes</a></li>
                
                <li><a href="/blogs/3-things-every-cto-should-know-about-kubernetes/">每位CTO都该知道的关于kubernetes的三件事</a></li>
                
            </ul>
            
        </div>
    </section>

    

<aside id="meta">

<div>
    <section id="datecount">
        <h4 id="date"> Sat Sep 16, 2017 </h4>
        <h5 id="wc"> 2000 Words </h5>
        <h5 id="readtime"> Read in about 4 Min </h5>
    </section>
    <ul id="categories">
        
    </ul>
    <ul id="tags">
        
        <li> <a href="https://jimmysong.io//tags/kubernetes">kubernetes</a> </li>
        
        <li> <a href="https://jimmysong.io//tags/docker">docker</a> </li>
        
    </ul>
</div>

<div>
    <section id="prev">
        &nbsp;<a class="previous" href="https://jimmysong.io/blogs/pod-lifecycle/"><i class="icon-arrow-left"></i> Kubernetes中Pod的生命周期</a><br>
    </section>
    <section id="next">
        &nbsp;<a class="next" href="https://jimmysong.io/talks/high-level-cloud-native-from-kevin-hoffman/">High Level Cloud Native From Kevin Hoffman <i class="icon-arrow-right"></i></a>
    </section>
</div>

<div>
    <section id="author">
        <h4>About the Author</h4>
        <p>
            <a href="https://jimmysong.io/about/">Jimmy Song</a> is a software engineer in Beijing, also an open source enthusiast and Big Data, Cloud Native fans. If you not see him front of computer, he must be traveling or taking pictures outside,
            visit the amazing pictures at <a href=https://jimmysongio.tuchong.com/>tuchong(图虫)</a>. Feel free to <a href=https://twitter.com/jimmysongio>follow him on twitter</a>.
        </p>
    </section>

</div>

</aside>

<meta itemprop="wordCount" content="1933">
<meta itemprop="datePublished" content="2017-09-16">
<meta itemprop="url" content="https://jimmysong.io/blogs/docker-cli-to-kubectl/">
 <aside id=comments>
    <div>
        <h2> Comments </h2>
    </div>
    
    
    
    <div id="container"></div>
    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
    <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    <script>
        var gitment = new Gitment({
            owner: 'rootsongjc', 
            repo: 'rootsongjc.github.io', 
            oauth: {
                client_id: '93a0df08e0f93ff0c8a3',
                client_secret: '3bdbf0b42c525f78582600bd38cf7f722ee40541',
            },
        })
        gitment.render('container')
    </script>
</aside> <footer>
    <div>
        <p>
            <a href="https://jimmysong.io/kubernetes-handbook">Kubernetes Handbook中文指南/实践手册</a> |
            <a href="https://jimmysong.io/cloud-native-go">Cloud Native Go</a> |
            <a href="https://jimmysong.io/awesome-cloud-native">Awesome Cloud Native</a> |
            <a href="https://jimmysong.io/migrating-to-cloud-native-application-architectures">迁移到云原生应用架构手册</a> |
            <a href="https://istio.doczh.cn/">Istio Service Mesh中文文档</a> |
            <a href="https://jimmysong.io/spark-on-k8s">Spark on Kubernetes</a> |
            Cloud Native Python comming soon...
    </div>
    <div>
        <p>

        </p>
        <p>Copyright &copy; 2013-2017 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span itemprop="name"><a href="https://jimmysong.io/about">Jimmy Song</a></span><span>
                Powered by <a href="https://gohugo.io">Hugo</a> ❤️  &nbsp; </span> <span> Theme <a href="https://themes.gohugo.io/nixon/">nixon</a></span>
            </span>
    </div>
</footer>


</body>

</html>

    
