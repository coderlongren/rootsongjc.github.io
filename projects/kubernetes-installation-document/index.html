<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="g8IYR9SNLF" />
    <meta name="uyan_auth" content="419f63884b" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="kubernetes, book, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="Kubernetes1.6集群部署完全指南 ——二进制文件部署开启TLS基于CentOS7发布 : rootsongjc.github.io"/>
<meta property="og:site_name" content="rootsongjc is Jimmy Song"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://jimmysong.io/projects/kubernetes-installation-document/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-04-13"/>
<meta property="article:modified_time" content="2017-04-13"/>



<meta property="article:tag" content="kubernetes">
<meta property="article:tag" content="book">




<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@rootsongjc">
<meta name="twitter:title" content="Kubernetes1.6集群部署完全指南 ——二进制文件部署开启TLS基于CentOS7发布 : rootsongjc.github.io">
<meta name="twitter:creator" content="@rootsongjc">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="rootsongjc.github.io">

    <base href="http://jimmysong.io/">
    <title> Kubernetes1.6集群部署完全指南 ——二进制文件部署开启TLS基于CentOS7发布 - Jimmy Song </title>
    <link rel="canonical" href="http://jimmysong.io/projects/kubernetes-installation-document/">

    
<link rel="stylesheet" href="/static/css/style.css">
<script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">
<script>
    hljs.initHighlightingOnLoad();
</script>

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

<script>
    (function() {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
<div style='margin:0 auto;width:0px;height:0px;overflow:hidden; '>
    <img src='http://olz1di9xf.bkt.clouddn.com/jimmy.jpg' />
</div>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=61142324" charset="UTF-8"></script>
</head>

<body lang="en" itemscope itemtype="http://schema.org/Article">
<header id="header">
    <figure>
      <a href="/" border=0 id="logolink"><div class="icon-octocat" id="logo"> </div></a>
    </figure>
    <div id="byline">by Jimmy Song</div>
    <nav id="nav">
            <ul id="mainnav">
            <li>
                <a href="/blogs/">
                <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
                <span> blogs </span>
            </a>
            </li>
            <li>
            <a href="/projects/">
                <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
                <span> projects </span>
            </a>
            </li>
            <li>
            <a href="/talks/">
                <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
                <span> talks </span>
            </a>
            </li>
            <li>
            <a href="http://www.linkedin.com/in/rootsongjc">
                <span class="icon"> <i aria-hidden="true" class="icon-linkedin"></i></span>
                <span> me </span>
            </a>
            </li>
        </ul>

            <ul id="social">
            <li id="share">
                <span class="icon icon-bubbles"> </span>
                <span class="title"> share </span>
                <div class="dropdown share">
                    <ul class="social">
                      <li> <a href="https://twitter.com/intent/tweet?status=Kubernetes1.6%e9%9b%86%e7%be%a4%e9%83%a8%e7%bd%b2%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%20%e2%80%94%e2%80%94%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e9%83%a8%e7%bd%b2%e5%bc%80%e5%90%afTLS%e5%9f%ba%e4%ba%8eCentOS7%e5%8f%91%e5%b8%83-http%3a%2f%2fjimmysong.io%2fprojects%2fkubernetes-installation-document%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fjimmysong.io%2fprojects%2fkubernetes-installation-document%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                        <li> <a href="https://plus.google.com/share?url=http%3a%2f%2fjimmysong.io%2fprojects%2fkubernetes-installation-document%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a> </li>
                        <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fjimmysong.io%2fprojects%2fkubernetes-installation-document%2f&title=Kubernetes1.6%e9%9b%86%e7%be%a4%e9%83%a8%e7%bd%b2%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%20%e2%80%94%e2%80%94%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e9%83%a8%e7%bd%b2%e5%bc%80%e5%90%afTLS%e5%9f%ba%e4%ba%8eCentOS7%e5%8f%91%e5%b8%83&source=spf13" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://del.icio.us/post?url=http%3a%2f%2fjimmysong.io%2fprojects%2fkubernetes-installation-document%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a> </li>
                        <li> <a href="http://www.reddit.com/submit?url=http%3a%2f%2fjimmysong.io%2fprojects%2fkubernetes-installation-document%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a> </li>
                    </ul>
                    <span class="subcount">sharing is caring</span>
                </div>
            </li>
            <li id="follow">
                <span class="icon icon-rocket"> </span>
                <span class="title"> follow </span>
                <div class="dropdown follow">
                    <ul class="social">
                        <li> <a href="http://www.twitter.com/rootsongjc" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="http://www.facebook.com/rootsongjc" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                        <li> <a href="http://www.linkedin.com/in/rootsongjc" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://github.com/rootsongjc" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                        <li> <a href="https://www.douban.com/people/deamonj/" target="_blank" title="豆瓣" class="facebook"><span class="icon icon-idea"></span>Douban</a> </li>
                        <li> <a href="https://tuchong.com/1425795/" target="_blank" title="图虫" class="github"><span class="icon icon-cc-2"></span>Tuchong</a> </li>                    </ul>
                    <span class="subcount">join 10k+ subscribers &amp; followers</span>
                </div>
            </li>
          </ul>

    </nav>
</header>



<section id="main">
  <h1 itemprop="name" id="title">Kubernetes1.6集群部署完全指南 ——二进制文件部署开启TLS基于CentOS7发布</h1>
  <div>
        <article itemprop="articleBody" id="content">
           <p><img src="http://olz1di9xf.bkt.clouddn.com/2016081309.jpg" alt="首都机场" /></p>

<p><em>（题图：清晨@首都机场 Aug 13,2016）</em></p>

<p><strong>这可能是目前为止最详细的kubernetes安装文档了。</strong></p>

<p>经过几天的安装、调试、整理，今天该文档终于发布了。</p>

<p>你可以在这里看到文档和配置文件<a href="https://github.com/rootsongjc/follow-me-install-kubernetes-cluster">和我一步步部署 kubernetes1.6 集群</a>。</p>

<p>或者直接下载<a href="http://olz1di9xf.bkt.clouddn.com/Kubernetes1.6%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97%E2%80%94%E2%80%94%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2%E5%BC%80%E5%90%AFTLS%E5%9F%BA%E4%BA%8ECentOS7.pdf">pdf</a>版本（2.92M）。</p>

<p>Kubernetes的安装繁琐，步骤复杂，该文档能够帮助跳过很多坑，节约不少时间，我在本地环境上已经安装完成，有问题欢迎在<a href="https://github.com/opsnull/follow-me-install-kubernetes-cluster">GitHub</a>上提issue。</p>

<p><strong>安装的集群详情</strong></p>

<ul>
<li>Kubernetes 1.6.0</li>
<li>Docker 1.12.5（使用yum安装）</li>
<li>Etcd 3.1.5</li>
<li>Flanneld 0.7 vxlan 网络</li>
<li>TLS 认证通信 (所有组件，如 etcd、kubernetes master 和 node)</li>
<li>RBAC 授权</li>
<li>kublet TLS BootStrapping</li>
<li>kubedns、dashboard、heapster(influxdb、grafana)、EFK(elasticsearch、fluentd、kibana) 集群插件</li>
<li>私有docker镜像仓库<a href="https://github.com/rootsongjc/follow-me-install-kubernetes-cluster/blob/master/github.com/vmware/harbor">harbor</a>（请自行部署，harbor提供离线安装包，直接使用docker-compose启动即可）</li>
</ul>

<p><strong>该文档中包括以下几个步骤</strong></p>

<ul>
<li>创建 TLS 通信所需的证书和秘钥</li>
<li>创建 kubeconfig 文件</li>
<li>创建三节点的高可用 etcd 集群</li>
<li>kubectl命令行工具</li>
<li>部署高可用 master 集群</li>
<li>部署 node 节点</li>
<li>kubedns 插件</li>
<li>Dashboard 插件</li>
<li>Heapster 插件</li>
<li>EFK 插件</li>
</ul>

        </article>
  </div>
</section>



<aside id="meta">

<div>
    <section id="datecount">
        <h4 id="date"> Thu Apr 13, 2017 </h4>
        <h5 id="wc"> 100 Words </h5>
        <h5 id="readtime"> Read in about 1 Min </h5>
    </section>
    <ul id="categories">
        
    </ul>
    <ul id="tags">
        
        <li> <a href="http://jimmysong.io//tags/kubernetes">kubernetes</a> </li>
        
        <li> <a href="http://jimmysong.io//tags/book">book</a> </li>
        
    </ul>
</div>

<div>
    <section id="prev">
        &nbsp;<a class="previous" href="http://jimmysong.io/projects/kubernetes-handbook-startup/"><i class="icon-arrow-left"></i> Kubernetes Handbook发起</a><br>
    </section>
    <section id="next">
        &nbsp;<a class="next" href="http://jimmysong.io/blogs/kubernetes-efk-installation-with-tls/">在开启TLS的Kubernetes1.6集群上安装EFK <i class="icon-arrow-right"></i></a>
    </section>
</div>

<div>
    <section id="author">
        <h4>About the Author</h4>
        <p>
            <a href="http://rootsongjc.github.io/about/">Jimmy Song</a> is a software engineer living in Beijing, he usually likes to hack on open source softwares, traveling and photographing. He also likes coding and writing. He can't live without music
            and movies. Most of his career is about big data and cloud native ecosystem. If you not see him on front of computer, he must being taking photoes in the outside, looking at his amazing photos at <a href=https://tuchong.com/1425795/>Jimmy's
            tuchong homepage</a>. He has recently been keen on microservices, DevOps, kubernetes, and cloud native application architectures.
        </p>
    </section>

</div>

</aside>

<meta itemprop="wordCount" content="61">
<meta itemprop="datePublished" content="2017-04-13">
<meta itemprop="url" content="http://jimmysong.io/projects/kubernetes-installation-document/">


<aside id=comments>
    <div><h2> Comments </h2></div>
    
    <div id="uyan_frame"></div>
    <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2126256"></script>
    
</aside>

<footer>
  <div>
    <p>
    &copy; 2013-2017 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Jimmy Song</span></span>
    Powered by <a href="http://gohugo.io">Hugo</a>.
    </p>
  </div>
</footer>
</body>
</html>

